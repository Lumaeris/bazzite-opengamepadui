modules:
  - type: script
    scripts:
      - opengamepadui-session.sh
    snippets:
      - "cp /etc/xdg/autostart/steam.desktop /etc/skel/.config/autostart/steam.desktop"
      - "sed -i 's@\[Desktop Entry\]@\[Desktop Entry\]\nHidden=true@g' /etc/skel/.config/autostart/steam.desktop"

  - type: dnf
    install:
      packages:
        - opengamepadui-0.40.4-1.x86_64.rpm

  - type: files
    files:
      - source: system
        destination: /

  - type: script
    scripts:
      - install-packages.sh

  - type: systemd
    system:
      enabled:
        - powerstation
        - inputplumber
        - inputplumber-suspend

  - type: signing
